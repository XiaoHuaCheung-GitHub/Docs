<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Anson Cheung">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Command: GIT - Anson Tech Notes</title>
  <link href='css/google-font.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="css/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Command: GIT";
    var mkdocs_page_input_path = "git/command-git.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="js/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Anson Tech Notes</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Language</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Language/">开发语言学习笔记和参考</a>
                </li>
                <li class="">
                    
    <span class="caption-text">C# Lang</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Language/C%23-Lang/">C# 学习笔记和参考</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">C Lang</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Language/C-Lang/">C 学习笔记和参考</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Java Lang</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Language/Java-Lang/">Java 学习笔记和参考</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Linux</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Linux/">Linux 学习笔记和参考</a>
                </li>
                <li class="">
                    
    <span class="caption-text">P1 Commands</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Linux/P1-Commands/">Linux命令参考</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Linux/P1-Commands/command-find/">Command: FIND</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Linux/P1-Commands/command-runuser/">Command: RUNUSER</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Linux/P1-Commands/command-su/">Command: SU</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Linux/P1-Commands/command-sudo/">Command: SUDO</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">P2 Shell</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Linux/P2-Shell/">Linux Shell 脚本</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">P3 Topic</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Linux/P3-Topic/">Index</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">P4 Activity</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Linux/P4-Activity/">Index</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Git</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Git 使用参考</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Command: GIT</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#command-git">Command: GIT</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#_1">获取与创建项目</a></li>
        
            <li><a class="toctree-l4" href="#_2">快照基础</a></li>
        
            <li><a class="toctree-l4" href="#_3">分支与合并</a></li>
        
            <li><a class="toctree-l4" href="#_4">项目分享与更新</a></li>
        
            <li><a class="toctree-l4" href="#_5">检查与比较</a></li>
        
            <li><a class="toctree-l4" href="#_6">调试</a></li>
        
            <li><a class="toctree-l4" href="#_7">补丁</a></li>
        
            <li><a class="toctree-l4" href="#_8">邮件</a></li>
        
            <li><a class="toctree-l4" href="#_9">外部系统</a></li>
        
            <li><a class="toctree-l4" href="#_10">管理</a></li>
        
            <li><a class="toctree-l4" href="#_11">底层命令</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Gradle</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../gradle/">Index</a>
                </li>
                <li class="">
                    
    <a class="" href="../../gradle/1-java-app/">构建Java 应用程序</a>
                </li>
                <li class="">
                    
    <a class="" href="../../gradle/2-java-web/">构建Java Web应用程序</a>
                </li>
                <li class="">
                    
    <a class="" href="../../gradle/3-java-ear/">构建J2EE应用程序</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Anson Tech Notes</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Git &raquo;</li>
        
      
    
    <li>Command: GIT</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="command-git">Command: GIT</h1>
<h2 id="_1">获取与创建项目</h2>
<p>有几种方式获取一个 Git 仓库。 一种是从网络上或者其他地方拷贝一个现有的仓库，另一种就是在一个目录中创建一个新的仓库。
1. git init</p>
<p>运行 git init 就可以将一个目录转变成一个 Git 仓库，这样你就可以开始对它进行版本管理了。</p>
<ol>
<li>git clone</li>
</ol>
<p>git clone 实际上是一个封装了其他几个命令的命令。 它创建了一个新目录，切换到新的目录，然后 git init 来初始化一个空的 Git 仓库， 然后为你指定的 URL 添加一个（默认名称为 origin 的）远程仓库（git remote add），再针对远程仓库执行 git fetch，最后通过 git checkout 将远程仓库的最新提交检出到本地的工作目录。</p>
<h2 id="_2">快照基础</h2>
<ol>
<li>
<p>git add</p>
<p>git add 命令将内容从工作目录添加到暂存区（或称为索引（index）区），以备下次提交。 当 git commit 命令执行时，默认情况下它只会检查暂存区域，因此 git add 是用来确定下一次提交时快照的样子的。
4. git status</p>
</li>
</ol>
<p>git status 命令会显示工作区及暂存区域中不同状态的文件。 其中包含了已修改但未暂存，或已经暂存但没有提交的文件。 在一般的显示形式中，它会给你一些如何在这些暂存区之间移动文件的提示。
5. git diff</p>
<p>当需要查看任意两棵树的差异时，可以使用 git diff 命令。 此命令可以查看你工作环境与你的暂存区的差异（git diff 默认的做法），你暂存区域与你最后提交之间的差异（git diff --staged），或者比较两个提交记录的差异（git diff master branchB）。</p>
<ol>
<li>
<p>git difftool</p>
<p>当你不想使用内置的 git diff 命令时。git difftool 可以用来简单地启动一个外部工具来为你展示两棵树之间的差异。</p>
</li>
</ol>
<p>7.git commit</p>
<p>git commit 命令将所有通过 git add 暂存的文件内容在数据库中创建一个持久的快照，然后将当前分支上的分支指针移到其之上。</p>
<p>8.git reset</p>
<p>git reset 命令主要用来根据你传递给动作的参数来执行撤销操作。 它可以移动 HEAD 指针并且可选的改变 index 或者暂存区，如果你使用 --hard 参数的话你甚至可以改变工作区。 如果错误地为这个命令附加后面的参数，你可能会丢失你的工作，所以在使用前你要确定你已经完全理解了它。</p>
<p>9.git rm</p>
<p>git rm 是 Git 用来从工作区，或者暂存区移除文件的命令。 在为下一次提交暂存一个移除操作上，它与 git add 有一点类似。</p>
<p>10.git mv</p>
<p>git mv 命令是一个便利命令，用于移到一个文件并且在新文件上执行<code>git add</code>命令及在老文件上执行<code>git rm</code>命令。</p>
<ol>
<li>git clean</li>
</ol>
<p>git clean 是一个用来从工作区中移除不想要的文件的命令。 可以是编译的临时文件或者合并冲突的文件。</p>
<h2 id="_3">分支与合并</h2>
<ol>
<li>git branch</li>
</ol>
<p>git branch 命令实际上是某种程度上的分支管理工具。 它可以列出你所有的分支、创建新分支、删除分支及重命名分支。</p>
<ol>
<li>git checkout</li>
</ol>
<p>git checkout 命令用来切换分支，或者检出内容到工作目录。</p>
<ol>
<li>git merge</li>
</ol>
<p>git merge 工具用来合并一个或者多个分支到你已经检出的分支中。 然后它将当前分支指针移动到合并结果上。</p>
<ol>
<li>git mergetool</li>
</ol>
<p>当你在 Git 的合并中遇到问题时，可以使用 git mergetool 来启动一个外部的合并帮助工具。</p>
<ol>
<li>git log</li>
</ol>
<p>git log 命令用来展示一个项目的可达历史记录，从最近的提交快照起。 默认情况下，它只显示你当前所在分支的历史记录，但是可以显示不同的甚至多个头记录或分支以供遍历。 此命令通常也用来在提交记录级别显示两个或多个分支之间的差异。</p>
<ol>
<li>git stash</li>
</ol>
<p>git stash 命令用来临时地保存一些还没有提交的工作，以便在分支上不需要提交未完成工作就可以清理工作目录。</p>
<ol>
<li>git tag</li>
</ol>
<p>git tag 命令用来为代码历史记录中的某一个点指定一个永久的书签。 一般来说它用于发布相关事项。</p>
<h2 id="_4">项目分享与更新</h2>
<p>在 Git 中没有多少访问网络的命令，几乎所以的命令都是在操作本地的数据库。 当你想要分享你的工作，或者从其他地方拉取变更时，这有几个处理远程仓库的命令。</p>
<ol>
<li>git fetch</li>
</ol>
<p>git fetch 命令与一个远程的仓库交互，并且将远程仓库中有但是在当前仓库的没有的所有信息拉取下来然后存储在你本地数据库中。</p>
<ol>
<li>git pull</li>
</ol>
<p>git pull 命令基本上就是 git fetch 和 git merge 命令的组合体，Git 从你指定的远程仓库中抓取内容，然后马上尝试将其合并进你所在的分支中。</p>
<ol>
<li>git push</li>
</ol>
<p>git push 命令用来与另一个仓库通信，计算你本地数据库与远程仓库的差异，然后将差异推送到另一个仓库中。 它需要有另一个仓库的写权限，因此这通常是需要验证的。</p>
<ol>
<li>git remote</li>
</ol>
<p>git remote 命令是一个是你远程仓库记录的管理工具。 它允许你将一个长的 URL 保存成一个简写的句柄，例如 origin ，这样你就可以不用每次都输入他们了。 你可以有多个这样的句柄，git remote 可以用来添加，修改，及删除它们。</p>
<ol>
<li>git archive</li>
</ol>
<p>git archive 命令用来创建项目一个指定快照的归档文件。</p>
<ol>
<li>git submodule</li>
</ol>
<p>git submodule 命令用来管理一个仓库的其他外部仓库。 它可以被用在库或者其他类型的共享资源上。 submodule 命令有几个子命令, 如（add、update、sync 等等）用来管理这些资源。</p>
<h2 id="_5">检查与比较</h2>
<ol>
<li>git show</li>
</ol>
<p>git show 命令可以以一种简单的人类可读的方式来显示一个 Git 对象。 你一般使用此命令来显示一个标签或一个提交的信息。</p>
<ol>
<li>git shortlog</li>
</ol>
<p>git shortlog 是一个用来归纳 git log 的输出的命令。 它可以接受很多与 git log 相同的选项，但是此命令并不会列出所有的提交，而是展示一个根据作者分组的提交记录的概括性信息</p>
<ol>
<li>git describe</li>
</ol>
<p>git describe 命令用来接受任何可以解析成一个提交的东西，然后生成一个人类可读的字符串且不可变。 这是一种获得一个提交的描述的方式，它跟一个提交的 SHA-1 值一样是无歧义，但是更具可读性。</p>
<h2 id="_6">调试</h2>
<p>Git 有一些命令可以用来帮你调试你代码中的问题。 包括找出是什么时候，是谁引入的变更。</p>
<ol>
<li>
<p>git bisect
  git bisect 工具是一个非常有用的调试工具，它通过自动进行一个二分查找来找到哪一个特定的提交是导致 bug 或者问题的第一个提交。</p>
</li>
<li>
<p>git blame
   git blame 命令标注任何文件的行，指出文件的每一行的最后的变更的提交及谁是那一个提交的作者。 当你要找那个人去询问关于这块特殊代码的信息时这会很有用。</p>
</li>
<li>
<p>git grep</p>
<p>git grep 命令可以帮助在源代码中，甚至是你项目的老版本中的任意文件中查找任何字符串或者正则表达式。</p>
</li>
</ol>
<h2 id="_7">补丁</h2>
<p>Git 中的一些命令是以引入的变更即提交这样的概念为中心的，这样一系列的提交，就是一系列的补丁。 这些命令以这样的方式来管理你的分支。</p>
<ol>
<li>git cherry-pick</li>
</ol>
<p>git cherry-pick 命令用来获得在单个提交中引入的变更，然后尝试将作为一个新的提交引入到你当前分支上。 从一个分支单独一个或者两个提交而不是合并整个分支的所有变更是非常有用的。 </p>
<ol>
<li>
<p>git rebase
   git rebase 命令基本是是一个自动化的 cherry-pick 命令。 它计算出一系列的提交，然后再以它们在其他地方以同样的顺序一个一个的 cherry-picks 出它们。</p>
</li>
<li>
<p>git revert
   git revert 命令本质上就是一个逆向的 git cherry-pick 操作。 它将你提交中的变更的以完全相反的方式的应用到一个新创建的提交中，本质上就是撤销或者倒转。</p>
</li>
</ol>
<h2 id="_8">邮件</h2>
<p>很多 Git 项目，包括 Git 本身，基本是通过邮件列表来维护的。 从方便地生成邮件补丁到从一个邮箱中应用这些补丁,Git 都有工具来让这些操作变得简单。</p>
<p>git apply
git apply 命令应用一个通过 git diff 或者甚至使用 GNU diff 命令创建的补丁。 它跟补丁命令做了差不多的工作，但还是有一些小小的差别。</p>
<p>我们在 应用来自邮件的补丁 一节中演示了它的使用及什么环境下你可能会用到它。</p>
<p>git am
git am 命令用来应用来自邮箱的补丁。特别是那些被 mbox 格式化过的。 这对于通过邮件接受补丁并将他们轻松地应用到你的项目中很有用。</p>
<p>我们在 使用 am 命令应用补丁 命令中提到了它的用法及工作流，包括使用 --resolved、-i 及 -3 选项。</p>
<p>我们在 电子邮件工作流钩子 也提到了几条 hooks，你可以用来辅助与 git am 相关工作流。</p>
<p>在 邮件通知 一节中我们也将用此命令来应用 格式化的 GitHub 的推送请求的变更。</p>
<p>git format-patch
git format-patch 命令用来以 mbox 的格式来生成一系列的补丁以便你可以发送到一个邮件列表中。</p>
<p>我们在 通过邮件的公开项目 一节中研究了一个使用 git format-patch 工具为一个项目做贡献的示例。</p>
<p>git imap-send
git imap-send 将一个由 git format-patch 生成的邮箱上传至 IMAP 草稿文件夹。 我们在 通过邮件的公开项目 一节中见过一个通过使用 git imap-send 工具向一个项目发送补丁进行贡献的例子。</p>
<p>git send-email
git send-mail 命令用来通过邮件发送那些使用 git format-patch 生成的补丁。</p>
<p>我们在 通过邮件的公开项目 一节中研究了一个使用 git send-email 工具发送补丁来为一个项目做贡献的示例。</p>
<p>git request-pull
git request-pull 命令只是简单的用来生成一个可通过邮件发送给某个人的示例信息体。 如果你在公共服务器上有一个分支，并且想让别人知道如何集成这些变更，而不用通过邮件发送补丁，你就可以执行此命令的输出发送给这个你想拉取变更的人。</p>
<h2 id="_9">外部系统</h2>
<p>Git 有一些可以与其他的版本控制系统集成的命令。</p>
<p>git svn
git svn 可以使 Git 作为一个客户端来与 Subversion 版本控制系统通信。 这意味着你可以使用 Git 来检出内容，或者提交到 Subversion 服务器。</p>
<p>Git 与 Subversion 一章深入讲解了此命令。</p>
<p>git fast-import
对于其他版本控制系统或者从其他任何的格式导入，你可以使用 git fast-import 快速地将其他格式映射到 Git 可以轻松记录的格式。</p>
<h2 id="_10">管理</h2>
<p>如果你正在管理一个 Git 仓库，或者需要通过一个复杂的方法来修复某些东西，Git 提供了一些管理命令来帮助你。</p>
<p>git gc
git gc 命令在你的仓库中执行 “garbage collection”，删除数据库中不需要的文件和将其他文件打包成一种更有效的格式。</p>
<p>此命令一般在背后为你工作，虽然你可以手动执行它-如果你想的话。 我们在维护 一节中研究此命令的几个示例。</p>
<p>git fsck
git fsck 命令用来检查内部数据库的问题或者不一致性。</p>
<p>我们只在 数据恢复 这一节中快速使用了一次此命令来搜索所有的悬空对象（dangling object）。</p>
<p>git reflog
git reflog 命令分析你所有分支的头指针的日志来查找出你在重写历史上可能丢失的提交。</p>
<p>我们主要在 引用日志 一节中提到了此命令，并在展示了一般用法，及如何使用 git log -g 来通过 git log 的输出来查看同样的信息。</p>
<p>我们同样在 数据恢复 一节中研究了一个恢复丢失的分支的实例。</p>
<p>git filter-branch
git filter-branch 命令用来根据某些规则来重写大量的提交记录，例如从任何地方删除文件，或者通过过滤一个仓库中的一个单独的子目录以提取出一个项目。</p>
<p>在 从每一个提交中移除一个文件 一节中，我们解释了此命令，并探究了其他几个选项，例如 --commit-filter，--subdirectory-filter 及 --tree-filter 。</p>
<h2 id="_11">底层命令</h2>
<p>在本书中我们也遇到了不少底层的命令。</p>
<p>我们遇到的第一个底层命令是在 合并请求引用 中的 ls-remote 命令。我们用它来查看服务端的原始引用。</p>
<p>我们在 手动文件再合并、 Rerere 及 索引 章节中使用 ls-files 来查看暂存区的更原始的样子。</p>
<p>我们同样在 分支引用 一节中提到了 rev-parse 命令，它可以接受任意字符串，并将其转成一个对象的 SHA-1 值。</p>
<p>git config</p>
<p>例子：</p>
<ol>
<li>
<p>克隆远程资料库到本地</p>
<p>git clone GIT_REPO_URL</p>
</li>
<li>
<p>把Git操作的内容追加到指定文件</p>
<p>git push &amp;&gt;&gt;  /tmp/git_operation.log</p>
</li>
<li>
<p>把Git操作的内容追加到指定文件</p>
<p>git push &amp;&gt;&gt;  /tmp/git_operation.log</p>
</li>
<li>
<p>把Git操作的内容追加到指定文件</p>
<p>git push &amp;&gt;&gt;  /tmp/git_operation.log</p>
</li>
<li>
<p>把Git操作的内容追加到指定文件</p>
<p>git push &amp;&gt;&gt;  /tmp/git_operation.log</p>
</li>
<li>
<p>把Git操作的内容追加到指定文件</p>
<p>git push &amp;&gt;&gt;  /tmp/git_operation.log</p>
</li>
<li>
<p>把Git操作的内容追加到指定文件</p>
<p>git push &amp;&gt;&gt;  /tmp/git_operation.log</p>
</li>
<li>
<p>把Git操作的内容追加到指定文件</p>
<p>git push &amp;&gt;&gt;  /tmp/git_operation.log</p>
</li>
</ol>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../gradle/" class="btn btn-neutral float-right" title="Index">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../" class="btn btn-neutral" title="Git 使用参考"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>
<!-- 
  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
-->
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../gradle/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
